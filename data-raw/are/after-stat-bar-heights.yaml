title: after-stat-bar-heights
input: "This bar chart shows the count of different cuts of diamonds, and each bar
  is stacked and filled  according to clarity:\n\n```\nggplot(data = diamonds) + \n
  \ geom_bar(mapping = aes(x = cut, fill = clarity))\n```\n\nCould you change this
  code so that the proportion of diamonds with a given cut corresponds to the bar
  height and not the count? Each bar should still be filled according to clarity."
target: "Preferably: \n\n```\nggplot(data = diamonds) + \n  geom_bar(aes(x = cut,
  y = after_stat(count) / sum(after_stat(count)), fill = clarity))\n```\n\nThe dot-dot
  notation (`..count..`) was deprecated in ggplot2 3.4.0, but it still works:\n\n```\nggplot(data
  = diamonds) + \n  geom_bar(aes(x = cut, y = ..count.. / sum(..count..), fill = clarity))\n```\n\nSimply
  setting `position = \"fill\" will result in each bar having a height of 1 and is
  not correct."
domain: Data analysis
task: New code
source: https://jrnold.github.io/r4ds-exercise-solutions/data-visualisation.html
knowledge: tidyverse
